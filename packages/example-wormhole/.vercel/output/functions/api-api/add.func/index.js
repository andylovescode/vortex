// @bun
var je=Object.defineProperty;var Z=(e,n)=>{for(var r in n)je(e,r,{get:n[r],enumerable:!0,configurable:!0,set:(s)=>n[r]=()=>s})};var p=(e,n)=>()=>(e&&(n=e(e=0)),n);var Pe,Q=(e,n)=>{for(var r in n)Pe(e,r,{get:n[r],enumerable:!0})};var Y=p(()=>{Pe=Object.defineProperty});function ee(e){return typeof e==="object"&&e!==null&&typeof e.then==="function"}function $(e,n){if(e===n)return!0;if(typeof e!==typeof n)return!1;if(Array.isArray(e)!==Array.isArray(n))return!1;if(ee(e)||ee(n))return!1;if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!$(e[r],n[r]))return!1;return!0}if(typeof e==="object"&&typeof n==="object"&&e!==null&&n!==null){if(Object.keys(e).toSorted().join(",")===Object.keys(n).toSorted().join(",")){for(let r in e)if(!$(e[r],n[r]))return!1;return!0}}return!1}function y(e="Value is undefined or null"){throw new Error(e)}function ne(e){return e===" "||e==="\t"||e===`
`||e==="\r"}function O(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}function A(e){return e>="0"&&e<="9"}function re(e){return O(e)||A(e)}function*te(e){let n=0,r=()=>e[n]??"",s=()=>e[n++]??"",t=()=>{n++};while(n<e.length){let i=r();if(ne(i)){t();continue}if(O(i)){let o="";while(re(r()))o+=s();if(o in g)yield["keyword",g[o]];else yield["identifier",o];continue}if(A(i)){let o="";while(A(r())||r()===".")o+=s();yield["number",Number(o)];continue}if(i==='"'||i==="'"||i==="`"){let o=s(),l="";while(r()!==o&&n<e.length){let u=s();if(u==="\\"){let c=r(),f={n:`
`,t:"\t",r:"\r",b:"\b",f:"\f",v:"\v","\\":"\\"};if(c in f)l+=f[c],t();else if(c===o)l+=o,t();else l+=u}else l+=u}if(r()===o)t();yield["string",l];continue}if(i in L){yield["symbol",L[i]],t();continue}throw new Error(`Unknown character: '${i}' at position ${n}`)}}function ie(e){return{tokens:e,current:0}}function Ce(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current++]??null}function I(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current]??null}function k(e){let n=I(e);if(n!==null)e.current++;return n}function D(e){let n=k(e);if(n===null)throw new Error("Unexpected end of input");if(n[0]==="number")return n[1];if(n[0]==="string")return n[1];if(n[0]==="keyword"){if(n[1]===g.null)return null;if(n[1]===g.undefined)return;if(n[1]===g.true)return!0;if(n[1]===g.false)return!1;throw new Error(`Unexpected keyword: ${n[1]}`)}let r=null;if(n[0]==="identifier")r=n[1],n=k(e);if(n===null)throw new Error("Unexpected end of input (after reading class)");if(n[0]==="symbol"&&n[1]==="LeftParenthesis"){let s={};while(!0){let t=k(e);if(t===null)throw new Error("Unexpected end of input (when trying to read key)");if(t[0]==="symbol"&&t[1]==="RightParenthesis")break;if(t[0]!=="identifier"&&t[0]!=="string")throw new Error(`Expected identifier or string, got ${t[0]}`);let i=k(e);if(i===null||i[0]!=="symbol"||i[1]!=="Equals")throw new Error(`Expected '=', got ${i?i[0]:"end of input"}`);let o=t[1],l=D(e);s[o]=l}if(r!==null){if(r==="date")return new Date(s.unix);if(r==="set")return new Set(s.items);if(r==="map"){let t=new Map;for(let[i,o]of s.entries)t.set(i,o);return t}throw new Error(`Unknown class: ${r}`)}return s}if(n[0]==="symbol"&&n[1]==="LeftSquareBracket"){let s=[];while(!0){if(I(e)?.[0]==="symbol"&&I(e)?.[1]==="RightSquareBracket"){k(e);break}let t=D(e);s.push(t)}return s}}function Ne(e){let n=[...te(e)],r=ie(n),s=D(r);if(r.current<n.length)throw new Error(`Unexpected tokens at the end: ${n.slice(r.current).map((t)=>t[0]).join(", ")}`);return s}function se(){return{output:"",indentLevel:0,minified:!1}}function w(e){e.indentLevel++}function _(e){e.indentLevel=Math.max(0,e.indentLevel-1)}function h(e){if(e.minified){a(e," ");return}a(e,`
`),a(e,"    ".repeat(e.indentLevel))}function a(e,n){e.output+=n}function q(e){let n=Number.POSITIVE_INFINITY,r="";for(let s of['"',"'","`"]){let t="";t+=s;for(let i of e)if(i===s)t+=`\\${i}`;else if(i==="\\")t+="\\\\";else if(i===`
`)t+="\\n";else if(i==="\t")t+="\\t";else if(i==="\r")t+="\\r";else t+=i;if(t+=s,t.length<n)n=t.length,r=t}return r}function b(e,n){if(typeof n==="number"){a(e,n.toString());return}if(typeof n==="string"){a(e,q(n));return}if(n===null){a(e,"null");return}if(n===void 0){a(e,"undefined");return}if(typeof n==="boolean"){a(e,n?"true":"false");return}if(Array.isArray(n)){a(e,"["),w(e);for(let r of n)h(e),b(e,r);_(e),h(e),a(e,"]");return}if(n instanceof Date)a(e,`date(unix=${n.getTime()})`);if(n instanceof Set)a(e,"set("),w(e),h(e),a(e,"items = "),b(e,n.values()),_(e),h(e),a(e,")");if(n instanceof Map)a(e,"map("),w(e),h(e),a(e,"entries = "),b(e,n.entries()),_(e),h(e),a(e,")");if(typeof n==="object"){a(e,"("),w(e);for(let[r,s]of Object.entries(n)){if(h(e),[...r].every(O))a(e,`${r} = `);else a(e,`${q(r)} = `);b(e,s)}_(e),h(e),a(e,")");return}throw new Error(`Unsupported type for serialization: ${typeof n}`)}function ue(e,n){let r=se(),s=n?.minified??!1;return r.minified=s,b(r,e),r.output.trim()}function Le(){let e=globalThis;return e.__ultraglobal??=new Map,e.__ultraglobal}function qe(e){return`${e.package}:::${e.name}`}function R(e,n){let r=Le(),s=qe(e),t=r.get(s);if(t)return t;return r.set(s,n),n}var S,g,L,Te;var v=p(()=>{Y();S={};Q(S,{escapeStr:()=>q,isAlphabetic:()=>O,isAlphanumeric:()=>re,isNumeric:()=>A,isWhitespace:()=>ne,keywords:()=>g,lex:()=>te,parse:()=>Ne,parseContext_create:()=>ie,parseContext_next:()=>Ce,parseContext_peek:()=>I,parseContext_read:()=>k,parseContext_readObj:()=>D,serialize:()=>ue,serializeContext_create:()=>se,serializeContext_dedent:()=>_,serializeContext_indent:()=>w,serializeContext_newline:()=>h,serializeContext_write:()=>a,serializeContext_writeObject:()=>b,stringify:()=>Te,symbols:()=>L});g={null:"Null",true:"True",false:"False",undefined:"Undefined"},L={"(":"LeftParenthesis",")":"RightParenthesis","[":"LeftSquareBracket","]":"RightSquareBracket","{":"LeftCurlyBracket","}":"RightCurlyBracket",",":"Comma",":":"Colon",";":"Semicolon",".":"Dot","=":"Equals","+":"Plus","-":"Minus","*":"Asterisk","/":"Slash","%":"Percent","!":"ExclamationMark","<":"LeftAngularBracket",">":"RightAngularBracket"};Te=ue});var Re,z,ze,oe,Me,Fe,le=(e,n)=>function(){return n||(0,e[oe(e)[0]])((n={exports:{}}).exports,n),n.exports},ce=(e,n)=>{for(var r in n)z(e,r,{get:n[r],enumerable:!0})},Ge=(e,n,r,s)=>{if(n&&typeof n==="object"||typeof n==="function"){for(var t=oe(n),i=0,o=t.length,l;i<o;i++)if(l=t[i],!Fe.call(e,l)&&l!==r)z(e,l,{get:((u)=>n[u]).bind(null,l),enumerable:!(s=ze(n,l))||s.enumerable})}return e},j=(e,n,r)=>(r=e!=null?Re(Me(e)):{},Ge(n||!e||!e.__esModule?z(r,"default",{value:e,enumerable:!0}):r,e));var fe=p(()=>{Re=Object.create,z=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,oe=Object.getOwnPropertyNames,Me=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty});function pe(e){let n,r=e,s=[];return n&&console.log(`[${n}]: initialized with `,r),{setId(t){n=t},[ae](){return r},subscribe(t,i){if(s.push(t),n&&console.trace(`[${n}]: subscribed with `,t),i?.callInitially!==!1)t(r);return new M().onClosed(()=>{s.splice(s.indexOf(t),1),n&&console.log(`[${n}]: unsubscribed `,t)})},set(t){if(n&&console.log(`[${n}]: trying to switch from `,r," -> ",t),!$(r,t)){r=t;for(let i of s)i(r);n&&console.log(`[${n}]: updated`)}else n&&console.log(`[${n}]: no change, value is still the same`)}}}var Ue,M,ae="@vortex-get-internal",P,E;var C=p(()=>{v();Ue=class e{#e=[];static hookLifetime=null;static changeHookLifetime(n){let r=e.hookLifetime;return e.hookLifetime=n,{reset(){e.hookLifetime=r},[Symbol.dispose](){e.hookLifetime=r}}}close(){for(let n of this.#e)n();this.#e=[]}onClosed(n){return this.#e.push(n),this}cascadesFrom(n){return n.onClosed(()=>{this.close()}),this}[Symbol.dispose]=this.close},M=class extends R({package:"@vortexjs/core",name:"Lifetime"},Ue){};P=pe,E=R({name:"Fragment",package:"@vortexjs/core"},Symbol("Fragment"))});var Be,Je,Ke=class{updateCallbackImmediate=0;updateCallbacks=new Set;loadingCounter=0;onDoneLoadingCallback=()=>{};onDoneLoading;constructor(){this.onDoneLoading=new Promise((e)=>{this.onDoneLoadingCallback=e})}onUpdate(e){return this.updateCallbacks.add(e),()=>{this.updateCallbacks.delete(e)}}markLoading(){let e=this;return this.loadingCounter++,{[Symbol.dispose](){e.loadingCounter--,e.updated()}}}updated(){if(this.updateCallbackImmediate)Je(this.updateCallbackImmediate);let e=this;this.updateCallbackImmediate=Be(()=>{e.updateCallbackImmediate=0;for(let n of e.updateCallbacks)n();if(e.loadingCounter===0)e.onDoneLoadingCallback()})}},Ve=class e{contexts={};streaming=new Ke;fork(){let n=new e;return n.contexts={...this.contexts},n}addContext(n,r){this.contexts[n]=r}static current=null;static setCurrent(n){let r=e.current;return e.current=n,{[Symbol.dispose](){e.current=r}}}},He,x=class{_children=[];parent=null;rendererNode=null;get children(){return this._children}set children(e){this._children=e;for(let n of e)n.parent=this;this.onChildrenChanged()}get flatChildren(){let e=[];function n(r){if(r instanceof de)for(let s of r.children)n(s);else e.push(r)}for(let r of this.children)n(r);return e}},de,Ze,Qe,Ye,F,Ln,qn,Rn;var G=p(()=>{fe();C();v();v();Be=globalThis.setImmediate??((e,...n)=>{return setTimeout(e,0,...n)}),Je=globalThis.clearImmediate??((e)=>{clearTimeout(e)}),He={};ce(He,{FLElement:()=>Qe,FLFragment:()=>de,FLNode:()=>x,FLPortal:()=>Ye,FLText:()=>Ze});de=class extends x{onChildrenChanged(){this.parent?.onChildrenChanged()}},Ze=class extends x{_text;get text(){return this._text}set text(e){this._text=e,this.renderer.setTextContent(this.rendererNode??y(),e)}constructor(e,n,r,s){super();this.renderer=n,this._text=e,this.rendererNode=n.createTextNode(r,s),n.setTextContent(this.rendererNode,e)}onChildrenChanged(){this.parent?.onChildrenChanged()}},Qe=class extends x{setAttribute(e,n){this.renderer.setAttribute(this.rendererNode??y(),e,n)}constructor(e,n,r){super();this.tag=e,this.renderer=n,this.rendererNode=n.createNode(e,r)}onChildrenChanged(){let e=this.flatChildren.map((n)=>n.rendererNode??y());this.renderer.setChildren(this.rendererNode??y(),e)}},Ye=class extends x{constructor(e,n){super();this.target=e,this.renderer=n}onChildrenChanged(){this.renderer.setChildren(this.target,this.flatChildren.map((e)=>e.rendererNode??y()))}},F=le({"../../node_modules/@oxc-project/runtime/src/helpers/usingCtx.js":(e,n)=>{function r(){var s=typeof SuppressedError=="function"?SuppressedError:function(l,u){var c=Error();return c.name="SuppressedError",c.error=l,c.suppressed=u,c},t={},i=[];function o(l,u){if(u!=null){if(Object(u)!==u)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(l)var c=u[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(c===void 0&&(c=u[Symbol.dispose||Symbol.for("Symbol.dispose")],l))var f=c;if(typeof c!="function")throw new TypeError("Object is not disposable.");f&&(c=function m(){try{f.call(u)}catch(d){return Promise.reject(d)}}),i.push({v:u,d:c,a:l})}else l&&i.push({d:u,a:l});return u}return{e:t,u:o.bind(null,!1),a:o.bind(null,!0),d(){var l,u=this.e,c=0;function f(){for(;l=i.pop();)try{if(!l.a&&c===1)return c=0,i.push(l),Promise.resolve().then(f);if(l.d){var d=l.d.call(l.v);if(l.a)return c|=2,Promise.resolve(d).then(f,m)}else c|=1}catch(T){return m(T)}if(c===1)return u!==t?Promise.reject(u):Promise.resolve();if(u!==t)throw u}function m(d){return u=u!==t?new s(d,u):d,f()}return f()}}}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}}),Ln=j(F(),1),qn=j(F(),1),Rn=j(F(),1)});function ge(e,n){let r=n.split("/").map((t)=>t.trim()).filter((t)=>t!=="");function s(t,i,o,l){if(t===e.length&&i===r.length)return{matched:!0,params:{...o},spreads:{...l}};if(t===e.length||i>r.length)return{matched:!1};let u=e[t]??y();if(u.type==="static"){if(i>=r.length||r[i]!==u.match)return{matched:!1};return s(t+1,i+1,o,l)}else if(u.type==="slug"){if(i>=r.length)return{matched:!1};let c={...o,[u.name]:r[i]};return s(t+1,i+1,c,l)}else if(u.type==="spread"){for(let c=0;c<=r.length-i;c++){let f={...l,[u.name]:r.slice(i,i+c)},m=s(t+1,i+c,o,f);if(m.matched)return m}return{matched:!1}}return{matched:!1}}return s(0,0,{},{})}var ke=p(()=>{v();G();v()});var be=p(()=>{C()});var we=p(()=>{be()});function _e(e){return async function(n){return await e.impl(n)}}async function Ee(e,n,r){let s=new URL(e.url).pathname;for(let t of n){if(!ge(t.matcher,s).matched)continue;if(t.method!==e.method)continue;let i=(r[t.schema]??y())(),o=(r[t.impl]??y())(),l=e.method==="GET"?new URL(e.url).searchParams.get("props")??"":await e.text(),u;try{u=S.parse(l)}catch{return new Response(["Your API request failed.","Why: The request body is not valid SKL"].join(`
`),{status:400,statusText:"Invalid SKL"})}let f=await(await i)["~standard"].validate(u);if("issues"in f)return new Response(["Your API request failed.","Why: The request body did not match the expected schema"].join(`
`),{status:400,statusText:"Failed to match against schema"});let m=f.value,T=await(await o)(m);return new Response(S.stringify(T))}}var yr;var U=p(()=>{ke();v();G();we();v();yr=P(typeof window!=="undefined"?window.location.href:"/")});function en(e){return{lang:e?.lang??W?.lang,message:e?.message,abortEarly:e?.abortEarly??W?.abortEarly,abortPipeEarly:e?.abortPipeEarly??W?.abortPipeEarly}}function rn(e){return nn?.get(e)}function sn(e){return tn?.get(e)}function on(e,n){return un?.get(e)?.get(n)}function ln(e){let n=typeof e;if(n==="string")return`"${e}"`;if(n==="number"||n==="bigint"||n==="boolean")return`${e}`;if(n==="object"||n==="function")return(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null";return n}function X(e,n,r,s,t){let i=t&&"input"in t?t.input:r.value,o=t?.expected??e.expects??null,l=t?.received??ln(i),u={kind:e.kind,type:e.type,input:i,expected:o,received:l,message:`Invalid ${n}: ${o?`Expected ${o} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:t?.path,issues:t?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},c=e.kind==="schema",f=t?.message??e.message??on(e.reference,u.lang)??(c?sn(u.lang):null)??s.message??rn(u.lang);if(f!==void 0)u.message=typeof f==="function"?f(u):f;if(c)r.typed=!1;if(r.issues)r.issues.push(u);else r.issues=[u]}function xe(e){return{version:1,vendor:"valibot",validate(n){return e["~run"]({value:n},en())}}}function cn(e,n,r){return typeof e.fallback==="function"?e.fallback(n,r):e.fallback}function fn(e,n,r){return typeof e.default==="function"?e.default(n,r):e.default}function N(e){return{kind:"schema",type:"number",reference:N,expects:"number",async:!1,message:e,get "~standard"(){return xe(this)},"~run"(n,r){if(typeof n.value==="number"&&!isNaN(n.value))n.typed=!0;else X(this,"type",n,r);return n}}}function B(e,n){return{kind:"schema",type:"object",reference:B,expects:"Object",async:!1,entries:e,message:n,get "~standard"(){return xe(this)},"~run"(r,s){let t=r.value;if(t&&typeof t==="object"){r.typed=!0,r.value={};for(let i in this.entries){let o=this.entries[i];if(i in t||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){let l=i in t?t[i]:fn(o),u=o["~run"]({value:l},s);if(u.issues){let c={type:"object",origin:"value",input:t,key:i,value:l};for(let f of u.issues){if(f.path)f.path.unshift(c);else f.path=[c];r.issues?.push(f)}if(!r.issues)r.issues=u.issues;if(s.abortEarly){r.typed=!1;break}}if(!u.typed)r.typed=!1;r.value[i]=u.value}else if(o.fallback!==void 0)r.value[i]=cn(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"){if(X(this,"key",r,s,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:t,key:i,value:t[i]}]}),s.abortEarly)break}}}else X(this,"type",r,s);return r}}}var W,nn,tn,un;var $e=()=>{};var Ae=p(()=>{C()});var J=p(()=>{Ae()});var wr,K=function({a:e,b:n}){return e+n},V;var H=p(()=>{$e();U();J();wr=_e({schema:V,impl:K,endpoint:"/api/add",method:"GET",isQuery:!0}),V=B({a:N(),b:N()})});var Ie={};Z(Ie,{$d_1395_1435:()=>K});var De=p(()=>{H()});var Se={};Z(Se,{$d_1323_1385:()=>V});var Oe=p(()=>{H()});U();var pn=[{matcher:[{type:"static",match:"api"},{type:"static",match:"add"}],impl:0,schema:1,method:"GET"}],yn=[async()=>(await Promise.resolve().then(() => (De(),Ie))).$d_1395_1435,async()=>(await Promise.resolve().then(() => (Oe(),Se))).$d_1323_1385];async function hn(e){return await Ee(e,pn,yn)||new Response("Not Found",{status:404})}export{hn as default};
