// @bun
var on=Object.defineProperty;var ln=(e,n)=>{for(var r in n)on(e,r,{get:n[r],enumerable:!0,configurable:!0,set:(i)=>n[r]=()=>i})};var d=(e,n)=>()=>(e&&(n=e(e=0)),n);var cn,ke=(e,n)=>{for(var r in n)cn(e,r,{get:n[r],enumerable:!0})};var we=d(()=>{cn=Object.defineProperty});function xe(e){return typeof e==="object"&&e!==null&&typeof e.then==="function"}function U(e,n){if(e===n)return!0;if(typeof e!==typeof n)return!1;if(Array.isArray(e)!==Array.isArray(n))return!1;if(xe(e)||xe(n))return!1;if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!U(e[r],n[r]))return!1;return!0}if(typeof e==="object"&&typeof n==="object"&&e!==null&&n!==null){if(Object.keys(e).toSorted().join(",")===Object.keys(n).toSorted().join(",")){for(let r in e)if(!U(e[r],n[r]))return!1;return!0}}return!1}function re(e){if(!("process"in globalThis)||process.env.DEBUG_PERF!=="1")return{[Symbol.dispose](){}};return console.time(e),{[Symbol.dispose](){console.timeEnd(e)}}}function m(e="Value is undefined or null"){throw new Error(e)}function Ee(e){return e===" "||e==="\t"||e===`
`||e==="\r"}function X(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}function W(e){return e>="0"&&e<="9"}function $e(e){return X(e)||W(e)}function*Ae(e){let n=0,r=()=>e[n]??"",i=()=>e[n++]??"",t=()=>{n++};while(n<e.length){let u=r();if(Ee(u)){t();continue}if(X(u)){let s="";while($e(r()))s+=i();if(s in I)yield["keyword",I[s]];else yield["identifier",s];continue}if(W(u)){let s="";while(W(r())||r()===".")s+=i();yield["number",Number(s)];continue}if(u==='"'||u==="'"||u==="`"){let s=i(),c="";while(r()!==s&&n<e.length){let o=i();if(o==="\\"){let l=r(),a={n:`
`,t:"\t",r:"\r",b:"\b",f:"\f",v:"\v","\\":"\\"};if(l in a)c+=a[l],t();else if(l===s)c+=s,t();else c+=o}else c+=o}if(r()===s)t();yield["string",c];continue}if(u in ee){yield["symbol",ee[u]],t();continue}throw new Error(`Unknown character: '${u}' at position ${n}`)}}function Ie(e){return{tokens:e,current:0}}function an(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current++]??null}function J(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current]??null}function N(e){let n=J(e);if(n!==null)e.current++;return n}function B(e){let n=N(e);if(n===null)throw new Error("Unexpected end of input");if(n[0]==="number")return n[1];if(n[0]==="string")return n[1];if(n[0]==="keyword"){if(n[1]===I.null)return null;if(n[1]===I.undefined)return;if(n[1]===I.true)return!0;if(n[1]===I.false)return!1;throw new Error(`Unexpected keyword: ${n[1]}`)}let r=null;if(n[0]==="identifier")r=n[1],n=N(e);if(n===null)throw new Error("Unexpected end of input (after reading class)");if(n[0]==="symbol"&&n[1]==="LeftParenthesis"){let i={};while(!0){let t=N(e);if(t===null)throw new Error("Unexpected end of input (when trying to read key)");if(t[0]==="symbol"&&t[1]==="RightParenthesis")break;if(t[0]!=="identifier"&&t[0]!=="string")throw new Error(`Expected identifier or string, got ${t[0]}`);let u=N(e);if(u===null||u[0]!=="symbol"||u[1]!=="Equals")throw new Error(`Expected '=', got ${u?u[0]:"end of input"}`);let s=t[1],c=B(e);i[s]=c}if(r!==null){if(r==="date")return new Date(i.unix);if(r==="set")return new Set(i.items);if(r==="map"){let t=new Map;for(let[u,s]of i.entries)t.set(u,s);return t}throw new Error(`Unknown class: ${r}`)}return i}if(n[0]==="symbol"&&n[1]==="LeftSquareBracket"){let i=[];while(!0){if(J(e)?.[0]==="symbol"&&J(e)?.[1]==="RightSquareBracket"){N(e);break}let t=B(e);i.push(t)}return i}}function fn(e){let n=[...Ae(e)],r=Ie(n),i=B(r);if(r.current<n.length)throw new Error(`Unexpected tokens at the end: ${n.slice(r.current).map((t)=>t[0]).join(", ")}`);return i}function Se(){return{output:"",indentLevel:0,minified:!1}}function P(e){e.indentLevel++}function L(e){e.indentLevel=Math.max(0,e.indentLevel-1)}function k(e){if(e.minified){y(e," ");return}y(e,`
`),y(e,"    ".repeat(e.indentLevel))}function y(e,n){e.output+=n}function ne(e){let n=Number.POSITIVE_INFINITY,r="";for(let i of['"',"'","`"]){let t="";t+=i;for(let u of e)if(u===i)t+=`\\${u}`;else if(u==="\\")t+="\\\\";else if(u===`
`)t+="\\n";else if(u==="\t")t+="\\t";else if(u==="\r")t+="\\r";else t+=u;if(t+=i,t.length<n)n=t.length,r=t}return r}function D(e,n){if(typeof n==="number"){y(e,n.toString());return}if(typeof n==="string"){y(e,ne(n));return}if(n===null){y(e,"null");return}if(n===void 0){y(e,"undefined");return}if(typeof n==="boolean"){y(e,n?"true":"false");return}if(Array.isArray(n)){y(e,"["),P(e);for(let r of n)k(e),D(e,r);L(e),k(e),y(e,"]");return}if(n instanceof Date)y(e,`date(unix=${n.getTime()})`);if(n instanceof Set)y(e,"set("),P(e),k(e),y(e,"items = "),D(e,n.values()),L(e),k(e),y(e,")");if(n instanceof Map)y(e,"map("),P(e),k(e),y(e,"entries = "),D(e,n.entries()),L(e),k(e),y(e,")");if(typeof n==="object"){y(e,"("),P(e);for(let[r,i]of Object.entries(n)){if(k(e),[...r].every(X))y(e,`${r} = `);else y(e,`${ne(r)} = `);D(e,i)}L(e),k(e),y(e,")");return}throw new Error(`Unsupported type for serialization: ${typeof n}`)}function Oe(e,n){let r=Se(),i=n?.minified??!1;return r.minified=i,D(r,e),r.output.trim()}function yn(){let e=globalThis;return e.__ultraglobal??=new Map,e.__ultraglobal}function hn(e){return`${e.package}:::${e.name}`}function te(e,n){let r=yn(),i=hn(e),t=r.get(i);if(t)return t;return r.set(i,n),n}function Ne(e,n="Unreachable state"){throw new Error(`${n} ${JSON.stringify(e)}`)}var _e,I,ee,pn;var b=d(()=>{we();_e={};ke(_e,{escapeStr:()=>ne,isAlphabetic:()=>X,isAlphanumeric:()=>$e,isNumeric:()=>W,isWhitespace:()=>Ee,keywords:()=>I,lex:()=>Ae,parse:()=>fn,parseContext_create:()=>Ie,parseContext_next:()=>an,parseContext_peek:()=>J,parseContext_read:()=>N,parseContext_readObj:()=>B,serialize:()=>Oe,serializeContext_create:()=>Se,serializeContext_dedent:()=>L,serializeContext_indent:()=>P,serializeContext_newline:()=>k,serializeContext_write:()=>y,serializeContext_writeObject:()=>D,stringify:()=>pn,symbols:()=>ee});I={null:"Null",true:"True",false:"False",undefined:"Undefined"},ee={"(":"LeftParenthesis",")":"RightParenthesis","[":"LeftSquareBracket","]":"RightSquareBracket","{":"LeftCurlyBracket","}":"RightCurlyBracket",",":"Comma",":":"Colon",";":"Semicolon",".":"Dot","=":"Equals","+":"Plus","-":"Minus","*":"Asterisk","/":"Slash","%":"Percent","!":"ExclamationMark","<":"LeftAngularBracket",">":"RightAngularBracket"};pn=Oe});var mn,ie,vn,De,dn,gn,Ce=(e,n)=>function(){return n||(0,e[De(e)[0]])((n={exports:{}}).exports,n),n.exports},je=(e,n)=>{for(var r in n)ie(e,r,{get:n[r],enumerable:!0})},bn=(e,n,r,i)=>{if(n&&typeof n==="object"||typeof n==="function"){for(var t=De(n),u=0,s=t.length,c;u<s;u++)if(c=t[u],!gn.call(e,c)&&c!==r)ie(e,c,{get:((o)=>n[o]).bind(null,c),enumerable:!(i=vn(n,c))||i.enumerable})}return e},K=(e,n,r)=>(r=e!=null?mn(dn(e)):{},bn(n||!e||!e.__esModule?ie(r,"default",{value:e,enumerable:!0}):r,e));var Te=d(()=>{mn=Object.create,ie=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,De=Object.getOwnPropertyNames,dn=Object.getPrototypeOf,gn=Object.prototype.hasOwnProperty});function H(){if(v.hookLifetime===null)throw new Error("No hook lifetime available");return v.hookLifetime}function q(e){let n,r=e,i=[];return n&&console.log(`[${n}]: initialized with `,r),{setId(t){n=t},[_](){return r},subscribe(t,u){if(i.push(t),n&&console.trace(`[${n}]: subscribed with `,t),u?.callInitially!==!1)t(r);return new v().onClosed(()=>{i.splice(i.indexOf(t),1),n&&console.log(`[${n}]: unsubscribed `,t)})},set(t){if(n&&console.log(`[${n}]: trying to switch from `,r," -> ",t),!U(r,t)){r=t;for(let u of i)u(r);n&&console.log(`[${n}]: updated`)}else n&&console.log(`[${n}]: no change, value is still the same`)}}}function C(e){return e[_]()}function ue(e,n,r=H()){let i=n?.dynamic??!1,t=[],u=q(e((o)=>{if(!t.includes(o))t.push(o);return o[_]()}));function s(){if(i){let o=new Set(t);u.set(e((p)=>{return o.add(p),p[_]()}));let l=new Set(t),a=l.difference(o);for(let p of a){let h=t.indexOf(p);if(h!==-1)t.splice(h,1),c[h]?.close(),c.splice(h,1)}let f=o.difference(l);for(let p of f){let h=p.subscribe(()=>{s()},{callInitially:!1});t.push(p),c.push(h)}}else u.set(e(C))}let c=t.map((o)=>{return o.subscribe(()=>{s()},{callInitially:!1}).cascadesFrom(r)});return{...u}}function oe(e,n,r=H()){let i=n?.dynamic??!1,t=[],u=new v;e((o)=>{if(!t.includes(o))t.push(o);return o[_]()},{lifetime:u});function s(){if(i){let o=new Set(t);u.close(),u=new v().cascadesFrom(r),e((p)=>{return o.add(p),p[_]()},{lifetime:u});let l=new Set(t),a=l.difference(o);for(let p of a){let h=t.indexOf(p);if(h!==-1)t.splice(h,1),c[h]?.close(),c.splice(h,1)}let f=o.difference(l);for(let p of f){let h=p.subscribe(()=>{s()},{callInitially:!1});t.push(p),c.push(h)}}else u.close(),u=new v().cascadesFrom(r),e(C,{lifetime:u})}let c=t.map((o)=>{return o.subscribe(()=>{s()},{callInitially:!1}).cascadesFrom(r)})}function R(e){return typeof e==="object"&&e!==null&&_ in e}function se(e){if(R(e))return e;return q(e)}function le(e,n=H()){return ue((r)=>{function i(t){if(R(t))return i(r(t));return t}return i(e)},{dynamic:!0},n)}function $(e){if(e===void 0)return[];return[e].flat().filter((n)=>n!==null&&n!==void 0).map((n)=>typeof n==="string"||typeof n==="number"||typeof n==="boolean"?V(n):R(n)?{type:"dynamic",value:E((r)=>{let i=r(n);return typeof i==="number"||typeof i==="string"||typeof i==="boolean"?V(i):i})}:n)}function V(e,n){return{type:"text",value:e,...n}}function z(e,n,r,i){let t=$(r).map((a)=>{if(typeof a==="string"||typeof a==="number"||typeof a==="boolean")return V(a);return a}),u={},s={},c={},o=[],l={};for(let[a,f]of Object.entries(n))if(f!==void 0)if(a.startsWith("bind:")){let p=a.slice(5);if(!R(f)||!("set"in f))throw new Error(`Binding value for "${p}" must be a writable store.`);s[p]=f}else if(a.startsWith("on:")){let p=a.slice(3);if(typeof f!=="function")throw new Error(`Event handler for "${p}" must be a function.`);c[p]=f}else if(a==="use"){if(typeof f!=="function"&&!Array.isArray(f))throw new Error("Use hook must be a function or an array of functions.");o.push(f)}else if(a==="style"){for(let[p,h]of Object.entries(f))if(h!==void 0)l[p]=se(h)}else u[a]=se(f);return{type:"element",name:e,attributes:u,children:t,bindings:s,eventHandlers:c,use:o,styles:l}}var kn,v,_="@vortex-get-internal",j,E,w;var Z=d(()=>{b();kn=class e{#e=[];static hookLifetime=null;static changeHookLifetime(n){let r=e.hookLifetime;return e.hookLifetime=n,{reset(){e.hookLifetime=r},[Symbol.dispose](){e.hookLifetime=r}}}close(){for(let n of this.#e)n();this.#e=[]}onClosed(n){return this.#e.push(n),this}cascadesFrom(n){return n.onClosed(()=>{this.close()}),this}[Symbol.dispose]=this.close},v=class extends te({package:"@vortexjs/core",name:"Lifetime"},kn){};j=q,E=ue;w=te({name:"Fragment",package:"@vortexjs/core"},Symbol("Fragment"))});function En(){let e=O.current;if(!e)throw new Error("No context scope found, you should have one if you're rendering a component.");return e}function qe(){return En().streaming}function $n(){let e=O.current;if(!e)return null;return e}function An(){let e=$n();if(!e)return null;return e.streaming}function Le({renderer:e,root:n,component:r,context:i}){try{var t=(0,On.default)();t.u(re("Initial page render"));let u=new Sn(e,n),s=new v,c=u.render({node:r,hydration:e.getHydrationContext(n),lt:s,context:i??O.current??new O}),o=new Me(n,e);return o.children=[c],s}catch(u){t.e=u}finally{t.d()}}function Fe(e,n,r){if("renderer"in e)return Le(e);else return Le({renderer:e,root:n,component:r})}function Ge(){let e=An();return(n)=>{let r=j(void 0);async function i(){if(e)try{var t=(0,Nn.default)();t.u(e.markLoading()),r.set(await n)}catch(u){t.e=u}finally{t.d()}else r.set(await n)}return i(),r}}var wn,xn,_n=class{updateCallbackImmediate=0;updateCallbacks=new Set;loadingCounter=0;onDoneLoadingCallback=()=>{};onDoneLoading;constructor(){this.onDoneLoading=new Promise((e)=>{this.onDoneLoadingCallback=e})}onUpdate(e){return this.updateCallbacks.add(e),()=>{this.updateCallbacks.delete(e)}}markLoading(){let e=this;return this.loadingCounter++,{[Symbol.dispose](){e.loadingCounter--,e.updated()}}}updated(){if(this.updateCallbackImmediate)xn(this.updateCallbackImmediate);let e=this;this.updateCallbackImmediate=wn(()=>{e.updateCallbackImmediate=0;for(let n of e.updateCallbacks)n();if(e.loadingCounter===0)e.onDoneLoadingCallback()})}},O=class e{contexts={};streaming=new _n;fork(){let n=new e;return n.contexts={...this.contexts},n}addContext(n,r){this.contexts[n]=r}static current=null;static setCurrent(n){let r=e.current;return e.current=n,{[Symbol.dispose](){e.current=r}}}},Pe="~vortex:intrinsic",In,M=class{_children=[];parent=null;rendererNode=null;get children(){return this._children}set children(e){this._children=e;for(let n of e)n.parent=this;this.onChildrenChanged()}get flatChildren(){let e=[];function n(r){if(r instanceof S)for(let i of r.children)n(i);else e.push(r)}for(let r of this.children)n(r);return e}},S,Re,ze,Me,fe,ce,Sn=class{constructor(e,n){this.renderer=e,this.root=n}render({node:e,hydration:n,lt:r,context:i}){if(e===void 0||e===null)return new S;if(Array.isArray(e))return this.render({node:{type:"fragment",children:e},hydration:n,lt:r,context:i});switch(e.type){case"fragment":{let s=new S;return s.children=e.children.map((c)=>this.render({node:c,hydration:n,lt:r,context:i})),s}case"text":return new Re(e.value.toString(),this.renderer,n,i);case"element":{let s=new ze(e.name,this.renderer,n),c=this.renderer.getHydrationContext(s.rendererNode??m());s.children=e.children.map((l)=>this.render({node:l,hydration:c,lt:r,context:i}));for(let[l,a]of Object.entries(e.attributes))a.subscribe((f)=>{s.setAttribute(l,f)}).cascadesFrom(r);for(let[l,a]of Object.entries(e.bindings))this.renderer.bindValue(s.rendererNode??m(),l,a).cascadesFrom(r);for(let[l,a]of Object.entries(e.eventHandlers))this.renderer.addEventListener(s.rendererNode??m(),l,a).cascadesFrom(r);for(let[l,a]of Object.entries(e.styles))a.subscribe((f)=>{this.renderer.setStyle(s.rendererNode??m(),l,f)}).cascadesFrom(r);let o=[e.use].flat();for(let l of o)l(s.rendererNode??m());return s}case"component":try{var t=(0,ce.default)();t.u(v.changeHookLifetime(r)),t.u(O.setCurrent(i)),t.u(re(`Rendering ${e.impl.name}`));let s=e.impl;if(Pe in s&&typeof s[Pe]==="string"){let o=this.renderer.implementations?.find((l)=>l.intrinsic===s);if(o)s=o.implementation}let c=s(e.props);return this.render({node:c,hydration:n,lt:r,context:i})}catch(s){t.e=s}finally{t.d()}case"dynamic":{let s=new S;return oe((c,{lifetime:o})=>{let l=this.render({node:c(e.value),hydration:n,lt:o,context:i});s.children=[l]},void 0,r),s}case"list":{new S;let s=new Map,c=new S,o="";return oe((l)=>{let a=l(e.items),f=a.map((g,A)=>e.getKey(g,A));for(let g of s.keys())if(!f.includes(g))(s.get(g)??m()).lifetime.close(),s.delete(g);for(let g of f)if(!s.has(g))try{var p=(0,ce.default)();let A=a[f.indexOf(g)],sn=q(A),Y=new v;p.u(v.changeHookLifetime(Y));let un=this.render({node:e.renderItem(A,f.indexOf(g)),hydration:n,lt:Y,context:i});s.set(g,{node:un,item:sn,lifetime:Y})}catch(A){p.e=A}finally{p.d()}let h=f.join("|||");if(h!==o)o=h,c.children=f.map((g)=>(s.get(g)??m()).node)}),c}case"context":try{var u=(0,ce.default)();let s=i.fork();return u.u(O.setCurrent(s)),s.addContext(e.id,e.value),this.render({node:e.children,hydration:n,lt:r,context:s})}catch(s){u.e=s}finally{u.d()}default:Ne(e,`No rendering implementation for ${JSON.stringify(e)}`)}}},On,Nn;var F=d(()=>{Te();Z();b();b();wn=globalThis.setImmediate??((e,...n)=>{return setTimeout(e,0,...n)}),xn=globalThis.clearImmediate??((e)=>{clearTimeout(e)});In={};je(In,{FLElement:()=>ze,FLFragment:()=>S,FLNode:()=>M,FLPortal:()=>Me,FLText:()=>Re});S=class extends M{onChildrenChanged(){this.parent?.onChildrenChanged()}},Re=class extends M{_text;get text(){return this._text}set text(e){this._text=e,this.renderer.setTextContent(this.rendererNode??m(),e)}constructor(e,n,r,i){super();this.renderer=n,this._text=e,this.rendererNode=n.createTextNode(r,i),n.setTextContent(this.rendererNode,e)}onChildrenChanged(){this.parent?.onChildrenChanged()}},ze=class extends M{setAttribute(e,n){this.renderer.setAttribute(this.rendererNode??m(),e,n)}constructor(e,n,r){super();this.tag=e,this.renderer=n,this.rendererNode=n.createNode(e,r)}onChildrenChanged(){let e=this.flatChildren.map((n)=>n.rendererNode??m());this.renderer.setChildren(this.rendererNode??m(),e)}},Me=class extends M{constructor(e,n){super();this.target=e,this.renderer=n}onChildrenChanged(){this.renderer.setChildren(this.target,this.flatChildren.map((e)=>e.rendererNode??m()))}},fe=Ce({"../../node_modules/@oxc-project/runtime/src/helpers/usingCtx.js":(e,n)=>{function r(){var i=typeof SuppressedError=="function"?SuppressedError:function(c,o){var l=Error();return l.name="SuppressedError",l.error=c,l.suppressed=o,l},t={},u=[];function s(c,o){if(o!=null){if(Object(o)!==o)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(c)var l=o[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(l===void 0&&(l=o[Symbol.dispose||Symbol.for("Symbol.dispose")],c))var a=l;if(typeof l!="function")throw new TypeError("Object is not disposable.");a&&(l=function f(){try{a.call(o)}catch(p){return Promise.reject(p)}}),u.push({v:o,d:l,a:c})}else c&&u.push({d:o,a:c});return o}return{e:t,u:s.bind(null,!1),a:s.bind(null,!0),d(){var c,o=this.e,l=0;function a(){for(;c=u.pop();)try{if(!c.a&&l===1)return l=0,u.push(c),Promise.resolve().then(a);if(c.d){var p=c.d.call(c.v);if(c.a)return l|=2,Promise.resolve(p).then(a,f)}else l|=1}catch(h){return f(h)}if(l===1)return o!==t?Promise.reject(o):Promise.resolve();if(o!==t)throw o}function f(p){return o=o!==t?new i(p,o):p,a()}return a()}}}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}}),ce=K(fe(),1),On=K(fe(),1);Nn=K(fe(),1)});function pe(e,n){let r=n.split("/").map((t)=>t.trim()).filter((t)=>t!=="");function i(t,u,s,c){if(t===e.length&&u===r.length)return{matched:!0,params:{...s},spreads:{...c}};if(t===e.length||u>r.length)return{matched:!1};let o=e[t]??m();if(o.type==="static"){if(u>=r.length||r[u]!==o.match)return{matched:!1};return i(t+1,u+1,s,c)}else if(o.type==="slug"){if(u>=r.length)return{matched:!1};let l={...s,[o.name]:r[u]};return i(t+1,u+1,l,c)}else if(o.type==="spread"){for(let l=0;l<=r.length-u;l++){let a={...c,[o.name]:r.slice(u,u+l)},f=i(t+1,u+l,s,a);if(f.matched)return f}return{matched:!1}}return{matched:!1}}return i(0,0,{},{})}var Ue=d(()=>{b();F();b()});function x(e,n){let{children:r,...i}=n||{};if(e===w)return{type:"fragment",children:$(r)};if(typeof e==="string")return z(e,i,r);if(typeof e==="function")return{type:"component",impl:e,props:{...n??{},children:$(r)}};throw new Error(`Invalid JSX type: ${e}`)}var ye;var We=d(()=>{Z();ye=x});var Je=d(()=>{We()});function Dn(){return E((e)=>{return new URL(e(G)).pathname})}function Cn(){if(typeof window==="undefined")return;G.subscribe((e)=>{if(window.location.href!==e)window.history.pushState({},"",e)},{callInitially:!1}),window.addEventListener("popstate",()=>{G.set(window.location.href)}),document.addEventListener("click",(e)=>{let r=e.composedPath().find((i)=>i instanceof HTMLAnchorElement);if(r?.href){let i=new URL(r.href,C(G));if(i.origin!==window.location.origin)return;e.preventDefault(),G.set(i.href)}})}function jn({pathname:e,props:n,loaders:r}){if("location"in globalThis)Cn();qe();let i=Ge(),t=e?j(e):Dn(),u=E((l)=>{let a=l(t);return n.routes.find((f)=>pe(f.matcher,a))}),s=E(async(l)=>{let a=l(u)??m(),f=[];for(let p of a.frames)f.push(await(r[p.index]??m())());return f}),c=le(E((l)=>{return i(l(s))})),o=E((l)=>{let a=x(w,{}),f=l(c);if(!f)return x("h1",{children:"loading"});for(let p of f.toReversed())a=x(p,{children:a});return a});return ye("html",{children:[ye("head",{children:[x("link",{rel:"stylesheet",href:"/styles.css"}),x("script",{src:"/entrypoint-client.js",type:"module"})]}),x("body",{children:o})]})}async function Be({props:e,loaders:n,renderer:r,root:i,pathname:t,lifetime:u=new v,context:s}){e:if("window"in globalThis){let c=t??window.location.pathname,o=e.routes.find((l)=>pe(l.matcher,c));if(!o)break e;for(let l of o.frames)await(n[l.index]??m())()}Fe({context:s,renderer:r,root:i,component:x(jn,{pathname:t,props:e,loaders:n})}).cascadesFrom(u)}function Xe(e){return async function(n){return await e.impl(n)}}var G;var he=d(()=>{Ue();b();F();Je();b();G=j(typeof window!=="undefined"?window.location.href:"/")});function qn(e){return{lang:e?.lang??ve?.lang,message:e?.message,abortEarly:e?.abortEarly??ve?.abortEarly,abortPipeEarly:e?.abortPipeEarly??ve?.abortPipeEarly}}function zn(e){return Rn?.get(e)}function Fn(e){return Mn?.get(e)}function Un(e,n){return Gn?.get(e)?.get(n)}function Wn(e){let n=typeof e;if(n==="string")return`"${e}"`;if(n==="number"||n==="bigint"||n==="boolean")return`${e}`;if(n==="object"||n==="function")return(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null";return n}function de(e,n,r,i,t){let u=t&&"input"in t?t.input:r.value,s=t?.expected??e.expects??null,c=t?.received??Wn(u),o={kind:e.kind,type:e.type,input:u,expected:s,received:c,message:`Invalid ${n}: ${s?`Expected ${s} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:t?.path,issues:t?.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},l=e.kind==="schema",a=t?.message??e.message??Un(e.reference,o.lang)??(l?Fn(o.lang):null)??i.message??zn(o.lang);if(a!==void 0)o.message=typeof a==="function"?a(o):a;if(l)r.typed=!1;if(r.issues)r.issues.push(o);else r.issues=[o]}function Ze(e){return{version:1,vendor:"valibot",validate(n){return e["~run"]({value:n},qn())}}}function Jn(e,n,r){return typeof e.fallback==="function"?e.fallback(n,r):e.fallback}function Bn(e,n,r){return typeof e.default==="function"?e.default(n,r):e.default}function Q(e){return{kind:"schema",type:"number",reference:Q,expects:"number",async:!1,message:e,get "~standard"(){return Ze(this)},"~run"(n,r){if(typeof n.value==="number"&&!isNaN(n.value))n.typed=!0;else de(this,"type",n,r);return n}}}function ge(e,n){return{kind:"schema",type:"object",reference:ge,expects:"Object",async:!1,entries:e,message:n,get "~standard"(){return Ze(this)},"~run"(r,i){let t=r.value;if(t&&typeof t==="object"){r.typed=!0,r.value={};for(let u in this.entries){let s=this.entries[u];if(u in t||(s.type==="exact_optional"||s.type==="optional"||s.type==="nullish")&&s.default!==void 0){let c=u in t?t[u]:Bn(s),o=s["~run"]({value:c},i);if(o.issues){let l={type:"object",origin:"value",input:t,key:u,value:c};for(let a of o.issues){if(a.path)a.path.unshift(l);else a.path=[l];r.issues?.push(a)}if(!r.issues)r.issues=o.issues;if(i.abortEarly){r.typed=!1;break}}if(!o.typed)r.typed=!1;r.value[u]=o.value}else if(s.fallback!==void 0)r.value[u]=Jn(s);else if(s.type!=="exact_optional"&&s.type!=="optional"&&s.type!=="nullish"){if(de(this,"key",r,i,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:t,key:u,value:t[u]}]}),i.abortEarly)break}}}else de(this,"type",r,i);return r}}}var ve,Rn,Mn,Gn;var Qe=()=>{};function T(e,n,r,i,t,u){let{children:s,...c}=n||{};if(e===w)return{type:"fragment",children:$(s),...t};if(typeof e==="string")return z(e,c,s,t);if(typeof e==="function")return{type:"component",impl:e,props:{...n??{},children:$(s)},...t};throw new Error(`Invalid JSX type: ${e}`)}var Ye=d(()=>{Z()});var be=d(()=>{Ye()});var Kn,en=function(){return T(w,{children:[T("h1",{class:"text-4xl font-bold",children:["Welcome to Wormhole, ",Object.entries(globalThis).length]},void 0,!0,void 0,this),T("p",{children:["This is an example app, go to the"," ",T("a",{href:"/docs/tada",children:"docs"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),T("button",{"on:click":async()=>{console.log(await Kn({a:1,b:2}))},children:"add"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},Vn=function({a:e,b:n}){return e+n},Hn;var nn=d(()=>{Qe();he();be();Kn=Xe({schema:Hn,impl:Vn,endpoint:"/api/add",method:"GET",isQuery:!0}),Hn=ge({a:Q(),b:Q()})});var rn={};ln(rn,{$d_109_720:()=>en});var tn=d(()=>{nn()});he();F();b();F();b();function Tn(e){return"tagName"in e?e.tagName:"Text"}function Pn(){return{html:"",write(e){this.html+=e},lastType:""}}function Ke(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function me(e,n=Pn()){let r=Tn(e);if(r==="Text"&&n.lastType==="Text")n.write("<!--$-->");if(n.lastType=r,"tagName"in e){n.write("<"),n.write(e.tagName);for(let[i,t]of Object.entries(e.attributes)){if(t===void 0)continue;n.write(` ${i}="${Ke(t)}"`)}n.write(">");for(let i of e.children)me(i,n);n.write("</"),n.write(e.tagName),n.write(">")}if("content"in e)n.write(Ke(e.content.toString()));return n.html}function Ln(e){return e.split(/(?=[A-Z])/).map((r)=>r.toLowerCase()).join("-")}function Ve(){return{createNode(e,n){return{tagName:e,attributes:{},children:[],parent:void 0}},setAttribute(e,n,r){if(!("tagName"in e))throw new Error("Cannot set attribute on a text node");e.attributes[n]=r},createTextNode(e){return{content:"",parent:void 0}},setTextContent(e,n){if(!("content"in e))throw new Error("Cannot set text content on a non-text node");e.content=n},setChildren(e,n){if(!("children"in e))throw new Error("Cannot set children on a text node");e.children=n;for(let r of n)r.parent=e},getHydrationContext(e){return},addEventListener(e,n,r){return new v},bindValue(e,n,r){return new v},setStyle(e,n,r){if(!("attributes"in e))throw new Error("Cannot set style on a text node");let i=e.attributes.style??"";i+=`${Ln(n)}: ${r};`,e.attributes.style=i}}}function He(){return{tagName:"html",attributes:{},children:[],parent:void 0,fixedIdent:"document.documentElement"}}var Zn=JSON.parse('{"routes":[{"matcher":[],"frames":[{"index":0}],"is404":false}]}'),Qn=[async()=>(await Promise.resolve().then(() => (tn(),rn))).$d_109_720];async function Yn(e){let r=new URL(e.url).pathname,i=Ve(),t=He(),u=new v;try{await Be({props:Zn,loaders:Qn,renderer:i,root:t,pathname:r,context:{},lifetime:u});let s=me(t);return new Response(s,{status:200,headers:{"Content-Type":"text/html"}})}catch(s){return console.error("Rendering error:",s),new Response("Internal Server Error",{status:500})}finally{u.close()}}export{Yn as default};
