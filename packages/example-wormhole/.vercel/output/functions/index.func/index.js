// @bun
var En=Object.defineProperty;var D=(e,n)=>{for(var t in n)En(e,t,{get:n[t],enumerable:!0,configurable:!0,set:(i)=>n[t]=()=>i})};var v=(e,n)=>()=>(e&&(n=e(e=0)),n);var $n,$e=(e,n)=>{for(var t in n)$n(e,t,{get:n[t],enumerable:!0})};var Ae=v(()=>{$n=Object.defineProperty});function Ie(e){return typeof e==="object"&&e!==null&&typeof e.then==="function"}function J(e,n){if(e===n)return!0;if(typeof e!==typeof n)return!1;if(Array.isArray(e)!==Array.isArray(n))return!1;if(Ie(e)||Ie(n))return!1;if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(!J(e[t],n[t]))return!1;return!0}if(typeof e==="object"&&typeof n==="object"&&e!==null&&n!==null){if(Object.keys(e).toSorted().join(",")===Object.keys(n).toSorted().join(",")){for(let t in e)if(!J(e[t],n[t]))return!1;return!0}}return!1}function oe(e){if(!("process"in globalThis)||process.env.DEBUG_PERF!=="1")return{[Symbol.dispose](){}};return console.time(e),{[Symbol.dispose](){console.timeEnd(e)}}}function m(e="Value is undefined or null"){throw new Error(e)}function Se(e){return e===" "||e==="\t"||e===`
`||e==="\r"}function H(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}function B(e){return e>="0"&&e<="9"}function Oe(e){return H(e)||B(e)}function*Ne(e){let n=0,t=()=>e[n]??"",i=()=>e[n++]??"",r=()=>{n++};while(n<e.length){let u=t();if(Se(u)){r();continue}if(H(u)){let s="";while(Oe(t()))s+=i();if(s in S)yield["keyword",S[s]];else yield["identifier",s];continue}if(B(u)){let s="";while(B(t())||t()===".")s+=i();yield["number",Number(s)];continue}if(u==='"'||u==="'"||u==="`"){let s=i(),l="";while(t()!==s&&n<e.length){let o=i();if(o==="\\"){let c=t(),f={n:`
`,t:"\t",r:"\r",b:"\b",f:"\f",v:"\v","\\":"\\"};if(c in f)l+=f[c],r();else if(c===s)l+=s,r();else l+=o}else l+=o}if(t()===s)r();yield["string",l];continue}if(u in se){yield["symbol",se[u]],r();continue}throw new Error(`Unknown character: '${u}' at position ${n}`)}}function Ce(e){return{tokens:e,current:0}}function An(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current++]??null}function X(e){if(e.current>=e.tokens.length)return null;return e.tokens[e.current]??null}function j(e){let n=X(e);if(n!==null)e.current++;return n}function K(e){let n=j(e);if(n===null)throw new Error("Unexpected end of input");if(n[0]==="number")return n[1];if(n[0]==="string")return n[1];if(n[0]==="keyword"){if(n[1]===S.null)return null;if(n[1]===S.undefined)return;if(n[1]===S.true)return!0;if(n[1]===S.false)return!1;throw new Error(`Unexpected keyword: ${n[1]}`)}let t=null;if(n[0]==="identifier")t=n[1],n=j(e);if(n===null)throw new Error("Unexpected end of input (after reading class)");if(n[0]==="symbol"&&n[1]==="LeftParenthesis"){let i={};while(!0){let r=j(e);if(r===null)throw new Error("Unexpected end of input (when trying to read key)");if(r[0]==="symbol"&&r[1]==="RightParenthesis")break;if(r[0]!=="identifier"&&r[0]!=="string")throw new Error(`Expected identifier or string, got ${r[0]}`);let u=j(e);if(u===null||u[0]!=="symbol"||u[1]!=="Equals")throw new Error(`Expected '=', got ${u?u[0]:"end of input"}`);let s=r[1],l=K(e);i[s]=l}if(t!==null){if(t==="date")return new Date(i.unix);if(t==="set")return new Set(i.items);if(t==="map"){let r=new Map;for(let[u,s]of i.entries)r.set(u,s);return r}throw new Error(`Unknown class: ${t}`)}return i}if(n[0]==="symbol"&&n[1]==="LeftSquareBracket"){let i=[];while(!0){if(X(e)?.[0]==="symbol"&&X(e)?.[1]==="RightSquareBracket"){j(e);break}let r=K(e);i.push(r)}return i}}function In(e){let n=[...Ne(e)],t=Ce(n),i=K(t);if(t.current<n.length)throw new Error(`Unexpected tokens at the end: ${n.slice(t.current).map((r)=>r[0]).join(", ")}`);return i}function De(){return{output:"",indentLevel:0,minified:!1}}function q(e){e.indentLevel++}function R(e){e.indentLevel=Math.max(0,e.indentLevel-1)}function _(e){if(e.minified){h(e," ");return}h(e,`
`),h(e,"    ".repeat(e.indentLevel))}function h(e,n){e.output+=n}function ue(e){let n=Number.POSITIVE_INFINITY,t="";for(let i of['"',"'","`"]){let r="";r+=i;for(let u of e)if(u===i)r+=`\\${u}`;else if(u==="\\")r+="\\\\";else if(u===`
`)r+="\\n";else if(u==="\t")r+="\\t";else if(u==="\r")r+="\\r";else r+=u;if(r+=i,r.length<n)n=r.length,t=r}return t}function T(e,n){if(typeof n==="number"){h(e,n.toString());return}if(typeof n==="string"){h(e,ue(n));return}if(n===null){h(e,"null");return}if(n===void 0){h(e,"undefined");return}if(typeof n==="boolean"){h(e,n?"true":"false");return}if(Array.isArray(n)){h(e,"["),q(e);for(let t of n)_(e),T(e,t);R(e),_(e),h(e,"]");return}if(n instanceof Date)h(e,`date(unix=${n.getTime()})`);if(n instanceof Set)h(e,"set("),q(e),_(e),h(e,"items = "),T(e,n.values()),R(e),_(e),h(e,")");if(n instanceof Map)h(e,"map("),q(e),_(e),h(e,"entries = "),T(e,n.entries()),R(e),_(e),h(e,")");if(typeof n==="object"){h(e,"("),q(e);for(let[t,i]of Object.entries(n)){if(_(e),[...t].every(H))h(e,`${t} = `);else h(e,`${ue(t)} = `);T(e,i)}R(e),_(e),h(e,")");return}throw new Error(`Unsupported type for serialization: ${typeof n}`)}function je(e,n){let t=De(),i=n?.minified??!1;return t.minified=i,T(t,e),t.output.trim()}function On(){let e=globalThis;return e.__ultraglobal??=new Map,e.__ultraglobal}function Nn(e){return`${e.package}:::${e.name}`}function le(e,n){let t=On(),i=Nn(e),r=t.get(i);if(r)return r;return t.set(i,n),n}function Te(e,n="Unreachable state"){throw new Error(`${n} ${JSON.stringify(e)}`)}var V,S,se,Sn;var w=v(()=>{Ae();V={};$e(V,{escapeStr:()=>ue,isAlphabetic:()=>H,isAlphanumeric:()=>Oe,isNumeric:()=>B,isWhitespace:()=>Se,keywords:()=>S,lex:()=>Ne,parse:()=>In,parseContext_create:()=>Ce,parseContext_next:()=>An,parseContext_peek:()=>X,parseContext_read:()=>j,parseContext_readObj:()=>K,serialize:()=>je,serializeContext_create:()=>De,serializeContext_dedent:()=>R,serializeContext_indent:()=>q,serializeContext_newline:()=>_,serializeContext_write:()=>h,serializeContext_writeObject:()=>T,stringify:()=>Sn,symbols:()=>se});S={null:"Null",true:"True",false:"False",undefined:"Undefined"},se={"(":"LeftParenthesis",")":"RightParenthesis","[":"LeftSquareBracket","]":"RightSquareBracket","{":"LeftCurlyBracket","}":"RightCurlyBracket",",":"Comma",":":"Colon",";":"Semicolon",".":"Dot","=":"Equals","+":"Plus","-":"Minus","*":"Asterisk","/":"Slash","%":"Percent","!":"ExclamationMark","<":"LeftAngularBracket",">":"RightAngularBracket"};Sn=je});var Cn,ce,Dn,Pe,jn,Tn,Le=(e,n)=>function(){return n||e[Pe(e)[0]]((n={exports:{}}).exports,n),n.exports},qe=(e,n)=>{for(var t in n)ce(e,t,{get:n[t],enumerable:!0})},Pn=(e,n,t,i)=>{if(n&&typeof n==="object"||typeof n==="function"){for(var r=Pe(n),u=0,s=r.length,l;u<s;u++)if(l=r[u],!Tn.call(e,l)&&l!==t)ce(e,l,{get:((o)=>n[o]).bind(null,l),enumerable:!(i=Dn(n,l))||i.enumerable})}return e},Z=(e,n,t)=>(t=e!=null?Cn(jn(e)):{},Pn(n||!e||!e.__esModule?ce(t,"default",{value:e,enumerable:!0}):t,e));var Re=v(()=>{Cn=Object.create,ce=Object.defineProperty,Dn=Object.getOwnPropertyDescriptor,Pe=Object.getOwnPropertyNames,jn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty});function Y(){if(d.hookLifetime===null)throw new Error("No hook lifetime available");return d.hookLifetime}function z(e){let n,t=e,i=[];return n&&console.log(`[${n}]: initialized with `,t),{setId(r){n=r},[E](){return t},subscribe(r,u){if(i.push(r),n&&console.trace(`[${n}]: subscribed with `,r),u?.callInitially!==!1)r(t);return new d().onClosed(()=>{i.splice(i.indexOf(r),1),n&&console.log(`[${n}]: unsubscribed `,r)})},set(r){if(n&&console.log(`[${n}]: trying to switch from `,t," -> ",r),!J(t,r)){t=r;for(let u of i)u(t);n&&console.log(`[${n}]: updated`)}else n&&console.log(`[${n}]: no change, value is still the same`)}}}function P(e){return e[E]()}function ae(e,n,t=Y()){let i=n?.dynamic??!1,r=[],u=z(e((o)=>{if(!r.includes(o))r.push(o);return o[E]()}));function s(){if(i){let o=new Set(r);u.set(e((p)=>{return o.add(p),p[E]()}));let c=new Set(r),f=c.difference(o);for(let p of f){let y=r.indexOf(p);if(y!==-1)r.splice(y,1),l[y]?.close(),l.splice(y,1)}let a=o.difference(c);for(let p of a){let y=p.subscribe(()=>{s()},{callInitially:!1});r.push(p),l.push(y)}}else u.set(e(P))}let l=r.map((o)=>{return o.subscribe(()=>{s()},{callInitially:!1}).cascadesFrom(t)});return{...u}}function pe(e,n,t=Y()){let i=n?.dynamic??!1,r=[],u=new d;e((o)=>{if(!r.includes(o))r.push(o);return o[E]()},{lifetime:u});function s(){if(i){let o=new Set(r);u.close(),u=new d().cascadesFrom(t),e((p)=>{return o.add(p),p[E]()},{lifetime:u});let c=new Set(r),f=c.difference(o);for(let p of f){let y=r.indexOf(p);if(y!==-1)r.splice(y,1),l[y]?.close(),l.splice(y,1)}let a=o.difference(c);for(let p of a){let y=p.subscribe(()=>{s()},{callInitially:!1});r.push(p),l.push(y)}}else u.close(),u=new d().cascadesFrom(t),e(P,{lifetime:u})}let l=r.map((o)=>{return o.subscribe(()=>{s()},{callInitially:!1}).cascadesFrom(t)})}function M(e){return typeof e==="object"&&e!==null&&E in e}function fe(e){if(M(e))return e;return z(e)}function ye(e,n=Y()){return ae((t)=>{function i(r){if(M(r))return i(t(r));return r}return i(e)},{dynamic:!0},n)}function A(e){if(e===void 0)return[];return[e].flat().filter((n)=>n!==null&&n!==void 0).map((n)=>typeof n==="string"||typeof n==="number"||typeof n==="boolean"?Q(n):M(n)?{type:"dynamic",value:$((t)=>{let i=t(n);return typeof i==="number"||typeof i==="string"||typeof i==="boolean"?Q(i):i})}:n)}function Q(e,n){return{type:"text",value:e,...n}}function F(e,n,t,i){let r=A(t).map((f)=>{if(typeof f==="string"||typeof f==="number"||typeof f==="boolean")return Q(f);return f}),u={},s={},l={},o=[],c={};for(let[f,a]of Object.entries(n))if(a!==void 0)if(f.startsWith("bind:")){let p=f.slice(5);if(!M(a)||!("set"in a))throw new Error(`Binding value for "${p}" must be a writable store.`);s[p]=a}else if(f.startsWith("on:")){let p=f.slice(3);if(typeof a!=="function")throw new Error(`Event handler for "${p}" must be a function.`);l[p]=a}else if(f==="use"){if(typeof a!=="function"&&!Array.isArray(a))throw new Error("Use hook must be a function or an array of functions.");o.push(a)}else if(f==="style"){for(let[p,y]of Object.entries(a))if(y!==void 0)c[p]=fe(y)}else u[f]=fe(a);return{type:"element",name:e,attributes:u,children:r,bindings:s,eventHandlers:l,use:o,styles:c}}var Ln,d,E="@vortex-get-internal",L,$,k;var ee=v(()=>{w();Ln=class e{#e=[];static hookLifetime=null;static changeHookLifetime(n){let t=e.hookLifetime;return e.hookLifetime=n,{reset(){e.hookLifetime=t},[Symbol.dispose](){e.hookLifetime=t}}}close(){for(let n of this.#e)n();this.#e=[]}onClosed(n){return this.#e.push(n),this}cascadesFrom(n){return n.onClosed(()=>{this.close()}),this}[Symbol.dispose]=this.close},d=class extends le({package:"@vortexjs/core",name:"Lifetime"},Ln){};L=z,$=ae;k=le({name:"Fragment",package:"@vortexjs/core"},Symbol("Fragment"))});function Mn(){let e=N.current;if(!e)throw new Error("No context scope found, you should have one if you're rendering a component.");return e}function Fe(){return Mn().streaming}function Fn(){let e=N.current;if(!e)return null;return e}function Gn(){let e=Fn();if(!e)return null;return e.streaming}function Me({renderer:e,root:n,component:t,context:i}){try{var r=Jn.default();r.u(oe("Initial page render"));let u=new Wn(e,n),s=new d,l=u.render({node:t,hydration:e.getHydrationContext(n),lt:s,context:i??N.current??new N}),o=new We(n,e);return o.children=[l],s}catch(u){r.e=u}finally{r.d()}}function Je(e,n,t){if("renderer"in e)return Me(e);else return Me({renderer:e,root:n,component:t})}function Be(){let e=Gn();return(n)=>{let t=L(void 0);async function i(){if(e)try{var r=Bn.default();r.u(e.markLoading()),t.set(await n)}catch(u){r.e=u}finally{r.d()}else t.set(await n)}return i(),t}}var qn,Rn,zn=class{updateCallbackImmediate=0;updateCallbacks=new Set;loadingCounter=0;onDoneLoadingCallback=()=>{};onDoneLoading;constructor(){this.onDoneLoading=new Promise((e)=>{this.onDoneLoadingCallback=e})}onUpdate(e){return this.updateCallbacks.add(e),()=>{this.updateCallbacks.delete(e)}}markLoading(){let e=this;return this.loadingCounter++,{[Symbol.dispose](){e.loadingCounter--,e.updated()}}}updated(){if(this.updateCallbackImmediate)Rn(this.updateCallbackImmediate);let e=this;this.updateCallbackImmediate=qn(()=>{e.updateCallbackImmediate=0;for(let n of e.updateCallbacks)n();if(e.loadingCounter===0)e.onDoneLoadingCallback()})}},N=class e{contexts={};streaming=new zn;fork(){let n=new e;return n.contexts={...this.contexts},n}addContext(n,t){this.contexts[n]=t}static current=null;static setCurrent(n){let t=e.current;return e.current=n,{[Symbol.dispose](){e.current=t}}}},ze="~vortex:intrinsic",Un,G=class{_children=[];parent=null;rendererNode=null;get children(){return this._children}set children(e){this._children=e;for(let n of e)n.parent=this;this.onChildrenChanged()}get flatChildren(){let e=[];function n(t){if(t instanceof O)for(let i of t.children)n(i);else e.push(t)}for(let t of this.children)n(t);return e}},O,Ge,Ue,We,ve,he,Wn=class{constructor(e,n){this.renderer=e,this.root=n}render({node:e,hydration:n,lt:t,context:i}){if(e===void 0||e===null)return new O;if(Array.isArray(e))return this.render({node:{type:"fragment",children:e},hydration:n,lt:t,context:i});switch(e.type){case"fragment":{let s=new O;return s.children=e.children.map((l)=>this.render({node:l,hydration:n,lt:t,context:i})),s}case"text":return new Ge(e.value.toString(),this.renderer,n,i);case"element":{let s=new Ue(e.name,this.renderer,n),l=this.renderer.getHydrationContext(s.rendererNode??m());s.children=e.children.map((c)=>this.render({node:c,hydration:l,lt:t,context:i}));for(let[c,f]of Object.entries(e.attributes))f.subscribe((a)=>{s.setAttribute(c,a)}).cascadesFrom(t);for(let[c,f]of Object.entries(e.bindings))this.renderer.bindValue(s.rendererNode??m(),c,f).cascadesFrom(t);for(let[c,f]of Object.entries(e.eventHandlers))this.renderer.addEventListener(s.rendererNode??m(),c,f).cascadesFrom(t);for(let[c,f]of Object.entries(e.styles))f.subscribe((a)=>{this.renderer.setStyle(s.rendererNode??m(),c,a)}).cascadesFrom(t);let o=[e.use].flat();for(let c of o)c(s.rendererNode??m());return s}case"component":try{var r=he.default();r.u(d.changeHookLifetime(t)),r.u(N.setCurrent(i)),r.u(oe(`Rendering ${e.impl.name}`));let s=e.impl;if(ze in s&&typeof s[ze]==="string"){let o=this.renderer.implementations?.find((c)=>c.intrinsic===s);if(o)s=o.implementation}let l=s(e.props);return this.render({node:l,hydration:n,lt:t,context:i})}catch(s){r.e=s}finally{r.d()}case"dynamic":{let s=new O;return pe((l,{lifetime:o})=>{let c=this.render({node:l(e.value),hydration:n,lt:o,context:i});s.children=[c]},void 0,t),s}case"list":{new O;let s=new Map,l=new O,o="";return pe((c)=>{let f=c(e.items),a=f.map((b,I)=>e.getKey(b,I));for(let b of s.keys())if(!a.includes(b))(s.get(b)??m()).lifetime.close(),s.delete(b);for(let b of a)if(!s.has(b))try{var p=he.default();let I=f[a.indexOf(b)],_n=z(I),ie=new d;p.u(d.changeHookLifetime(ie));let xn=this.render({node:e.renderItem(I,a.indexOf(b)),hydration:n,lt:ie,context:i});s.set(b,{node:xn,item:_n,lifetime:ie})}catch(I){p.e=I}finally{p.d()}let y=a.join("|||");if(y!==o)o=y,l.children=a.map((b)=>(s.get(b)??m()).node)}),l}case"context":try{var u=he.default();let s=i.fork();return u.u(N.setCurrent(s)),s.addContext(e.id,e.value),this.render({node:e.children,hydration:n,lt:t,context:s})}catch(s){u.e=s}finally{u.d()}default:Te(e,`No rendering implementation for ${JSON.stringify(e)}`)}}},Jn,Bn;var U=v(()=>{Re();ee();w();w();qn=globalThis.setImmediate??((e,...n)=>{return setTimeout(e,0,...n)}),Rn=globalThis.clearImmediate??((e)=>{clearTimeout(e)});Un={};qe(Un,{FLElement:()=>Ue,FLFragment:()=>O,FLNode:()=>G,FLPortal:()=>We,FLText:()=>Ge});O=class extends G{onChildrenChanged(){this.parent?.onChildrenChanged()}},Ge=class extends G{_text;get text(){return this._text}set text(e){this._text=e,this.renderer.setTextContent(this.rendererNode??m(),e)}constructor(e,n,t,i){super();this.renderer=n,this._text=e,this.rendererNode=n.createTextNode(t,i),n.setTextContent(this.rendererNode,e)}onChildrenChanged(){this.parent?.onChildrenChanged()}},Ue=class extends G{setAttribute(e,n){this.renderer.setAttribute(this.rendererNode??m(),e,n)}constructor(e,n,t){super();this.tag=e,this.renderer=n,this.rendererNode=n.createNode(e,t)}onChildrenChanged(){let e=this.flatChildren.map((n)=>n.rendererNode??m());this.renderer.setChildren(this.rendererNode??m(),e)}},We=class extends G{constructor(e,n){super();this.target=e,this.renderer=n}onChildrenChanged(){this.renderer.setChildren(this.target,this.flatChildren.map((e)=>e.rendererNode??m()))}},ve=Le({"../../node_modules/@oxc-project/runtime/src/helpers/usingCtx.js":(e,n)=>{function t(){var i=typeof SuppressedError=="function"?SuppressedError:function(l,o){var c=Error();return c.name="SuppressedError",c.error=l,c.suppressed=o,c},r={},u=[];function s(l,o){if(o!=null){if(Object(o)!==o)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(l)var c=o[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(c===void 0&&(c=o[Symbol.dispose||Symbol.for("Symbol.dispose")],l))var f=c;if(typeof c!="function")throw new TypeError("Object is not disposable.");f&&(c=function a(){try{f.call(o)}catch(p){return Promise.reject(p)}}),u.push({v:o,d:c,a:l})}else l&&u.push({d:o,a:l});return o}return{e:r,u:s.bind(null,!1),a:s.bind(null,!0),d(){var l,o=this.e,c=0;function f(){for(;l=u.pop();)try{if(!l.a&&c===1)return c=0,u.push(l),Promise.resolve().then(f);if(l.d){var p=l.d.call(l.v);if(l.a)return c|=2,Promise.resolve(p).then(f,a)}else c|=1}catch(y){return a(y)}if(c===1)return o!==r?Promise.reject(o):Promise.resolve();if(o!==r)throw o}function a(p){return o=o!==r?new i(p,o):p,f()}return f()}}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}}),he=Z(ve(),1),Jn=Z(ve(),1);Bn=Z(ve(),1)});function ne(e,n){let t=n.split("/").map((r)=>r.trim()).filter((r)=>r!=="");function i(r,u,s,l){if(r===e.length&&u===t.length)return{matched:!0,params:{...s},spreads:{...l}};if(r===e.length||u>t.length)return{matched:!1};let o=e[r]??m();if(o.type==="static"){if(u>=t.length||t[u]!==o.match)return{matched:!1};return i(r+1,u+1,s,l)}else if(o.type==="slug"){if(u>=t.length)return{matched:!1};let c={...s,[o.name]:t[u]};return i(r+1,u+1,c,l)}else if(o.type==="spread"){for(let c=0;c<=t.length-u;c++){let f={...l,[o.name]:t.slice(u,u+c)},a=i(r+1,u+c,s,f);if(a.matched)return a}return{matched:!1}}return{matched:!1}}return i(0,0,{},{})}var Xe=v(()=>{w();U();w()});function x(e,n){let{children:t,...i}=n||{};if(e===k)return{type:"fragment",children:A(t)};if(typeof e==="string")return F(e,i,t);if(typeof e==="function")return{type:"component",impl:e,props:{...n??{},children:A(t)}};throw new Error(`Invalid JSX type: ${e}`)}var de;var Ke=v(()=>{ee();de=x});var Ve=v(()=>{Ke()});function Xn(){return $((e)=>{return new URL(e(W)).pathname})}function Kn(){if(typeof window==="undefined")return;W.subscribe((e)=>{if(window.location.href!==e)window.history.pushState({},"",e)},{callInitially:!1}),window.addEventListener("popstate",()=>{W.set(window.location.href)}),document.addEventListener("click",(e)=>{let t=e.composedPath().find((i)=>i instanceof HTMLAnchorElement);if(t?.href){let i=new URL(t.href,P(W));if(i.origin!==window.location.origin)return;e.preventDefault(),W.set(i.href)}})}function Vn({pathname:e,props:n,loaders:t}){if("location"in globalThis)Kn();Fe();let i=Be(),r=e?L(e):Xn(),u=$((c)=>{let f=c(r);return n.routes.find((a)=>ne(a.matcher,f))}),s=$(async(c)=>{let f=c(u)??m(),a=[];for(let p of f.frames)a.push(await(t[p.index]??m())());return a}),l=ye($((c)=>{return i(c(s))})),o=$((c)=>{let f=x(k,{}),a=c(l);if(!a)return x("h1",{children:"loading"});for(let p of a.toReversed())f=x(p,{children:f});return f});return de("html",{children:[de("head",{children:[x("link",{rel:"stylesheet",href:"/styles.css"}),x("script",{src:"/entrypoint-client.js",type:"module"})]}),x("body",{children:o})]})}async function He({props:e,loaders:n,renderer:t,root:i,pathname:r,lifetime:u=new d,context:s}){e:if("window"in globalThis){let l=r??window.location.pathname,o=e.routes.find((c)=>ne(c.matcher,l));if(!o)break e;for(let c of o.frames)await(n[c.index]??m())()}Je({context:s,renderer:t,root:i,component:x(Vn,{pathname:r,props:e,loaders:n})}).cascadesFrom(u)}function Ze(e){return async function(n){return await e.impl(n)}}async function Qe(e,n,t){let i=new URL(e.url).pathname;for(let r of n){if(!ne(r.matcher,i).matched)continue;if(r.method!==e.method)continue;let u=(t[r.schema]??m())(),s=(t[r.impl]??m())(),l=e.method==="GET"?new URL(e.url).searchParams.get("props")??"":await e.text(),o;try{o=V.parse(l)}catch{return new Response(["Your API request failed.","Why: The request body is not valid SKL"].join(`
`),{status:400,statusText:"Invalid SKL"})}let f=await(await u)["~standard"].validate(o);if("issues"in f)return new Response(["Your API request failed.","Why: The request body did not match the expected schema"].join(`
`),{status:400,statusText:"Failed to match against schema"});let a=f.value,y=await(await s)(a);return new Response(V.stringify(y))}}var W;var te=v(()=>{Xe();w();U();Ve();w();W=L(typeof window!=="undefined"?window.location.href:"/")});function Yn(e){return{lang:e?.lang??be?.lang,message:e?.message,abortEarly:e?.abortEarly??be?.abortEarly,abortPipeEarly:e?.abortPipeEarly??be?.abortPipeEarly}}function nt(e){return et?.get(e)}function rt(e){return tt?.get(e)}function st(e,n){return it?.get(e)?.get(n)}function ut(e){let n=typeof e;if(n==="string")return`"${e}"`;if(n==="number"||n==="bigint"||n==="boolean")return`${e}`;if(n==="object"||n==="function")return(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null";return n}function ke(e,n,t,i,r){let u=r&&"input"in r?r.input:t.value,s=r?.expected??e.expects??null,l=r?.received??ut(u),o={kind:e.kind,type:e.type,input:u,expected:s,received:l,message:`Invalid ${n}: ${s?`Expected ${s} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:r?.path,issues:r?.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},c=e.kind==="schema",f=r?.message??e.message??st(e.reference,o.lang)??(c?rt(o.lang):null)??i.message??nt(o.lang);if(f!==void 0)o.message=typeof f==="function"?f(o):f;if(c)t.typed=!1;if(t.issues)t.issues.push(o);else t.issues=[o]}function tn(e){return{version:1,vendor:"valibot",validate(n){return e["~run"]({value:n},Yn())}}}function ot(e,n,t){return typeof e.fallback==="function"?e.fallback(n,t):e.fallback}function lt(e,n,t){return typeof e.default==="function"?e.default(n,t):e.default}function re(e){return{kind:"schema",type:"number",reference:re,expects:"number",async:!1,message:e,get "~standard"(){return tn(this)},"~run"(n,t){if(typeof n.value==="number"&&!isNaN(n.value))n.typed=!0;else ke(this,"type",n,t);return n}}}function we(e,n){return{kind:"schema",type:"object",reference:we,expects:"Object",async:!1,entries:e,message:n,get "~standard"(){return tn(this)},"~run"(t,i){let r=t.value;if(r&&typeof r==="object"){t.typed=!0,t.value={};for(let u in this.entries){let s=this.entries[u];if(u in r||(s.type==="exact_optional"||s.type==="optional"||s.type==="nullish")&&s.default!==void 0){let l=u in r?r[u]:lt(s),o=s["~run"]({value:l},i);if(o.issues){let c={type:"object",origin:"value",input:r,key:u,value:l};for(let f of o.issues){if(f.path)f.path.unshift(c);else f.path=[c];t.issues?.push(f)}if(!t.issues)t.issues=o.issues;if(i.abortEarly){t.typed=!1;break}}if(!o.typed)t.typed=!1;t.value[u]=o.value}else if(s.fallback!==void 0)t.value[u]=ot(s);else if(s.type!=="exact_optional"&&s.type!=="optional"&&s.type!=="nullish"){if(ke(this,"key",t,i,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:r,key:u,value:r[u]}]}),i.abortEarly)break}}}else ke(this,"type",t,i);return t}}}var be,et,tt,it;var rn=()=>{};function g(e,n,t,i,r,u){let{children:s,...l}=n||{};if(e===k)return{type:"fragment",children:A(s),...r};if(typeof e==="string")return F(e,l,s,r);if(typeof e==="function")return{type:"component",impl:e,props:{...n??{},children:A(s)},...r};throw new Error(`Invalid JSX type: ${e}`)}var sn=v(()=>{ee()});var _e=v(()=>{sn()});var ft,un=function(){return g(k,{children:[g("h1",{class:"text-4xl font-bold",children:["Welcome to Wormhole, ",Object.entries(globalThis).length]},void 0,!0,void 0,this),g("p",{children:["This is an example app, go to the"," ",g("a",{href:"/docs/tada",children:"docs"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),g("button",{"on:click":async()=>{console.log(await ft({a:1,b:2}))},children:"add"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},on=function({children:e}){return g(k,{children:[g("title",{children:"Wormhole Example"},void 0,!1,void 0,this),e]},void 0,!0,void 0,this)},ln=function(){return g(k,{children:g("h1",{children:"404 not found"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},cn=function({page:e}){return g(k,{children:[g("h1",{children:["Documentation for ",e.join(", ")]},void 0,!0,void 0,this),g("p",{children:["This is the documentation page for ",e.join(", "),"."]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},xe=function({a:e,b:n}){return e+n},Ee;var C=v(()=>{rn();te();_e();ft=Ze({schema:Ee,impl:xe,endpoint:"/api/add",method:"GET",isQuery:!0}),Ee=we({a:re(),b:re()})});var fn={};D(fn,{$d_109_720:()=>un});var an=v(()=>{C()});var pn={};D(pn,{$d_732_888:()=>on});var yn=v(()=>{C()});var hn={};D(hn,{$d_1050_1265:()=>cn});var mn=v(()=>{C()});var vn={};D(vn,{$d_902_1009:()=>ln});var dn=v(()=>{C()});var gn={};D(gn,{$d_1395_1435:()=>xe});var bn=v(()=>{C()});var kn={};D(kn,{$d_1323_1385:()=>Ee});var wn=v(()=>{C()});te();U();w();U();w();function Hn(e){return"tagName"in e?e.tagName:"Text"}function Zn(){return{html:"",write(e){this.html+=e},lastType:""}}function Ye(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function ge(e,n=Zn()){let t=Hn(e);if(t==="Text"&&n.lastType==="Text")n.write("<!--$-->");if(n.lastType=t,"tagName"in e){n.write("<"),n.write(e.tagName);for(let[i,r]of Object.entries(e.attributes)){if(r===void 0)continue;n.write(` ${i}="${Ye(r)}"`)}n.write(">");for(let i of e.children)ge(i,n);n.write("</"),n.write(e.tagName),n.write(">")}if("content"in e)n.write(Ye(e.content.toString()));return n.html}function Qn(e){return e.split(/(?=[A-Z])/).map((t)=>t.toLowerCase()).join("-")}function en(){return{createNode(e,n){return{tagName:e,attributes:{},children:[],parent:void 0}},setAttribute(e,n,t){if(!("tagName"in e))throw new Error("Cannot set attribute on a text node");e.attributes[n]=t},createTextNode(e){return{content:"",parent:void 0}},setTextContent(e,n){if(!("content"in e))throw new Error("Cannot set text content on a non-text node");e.content=n},setChildren(e,n){if(!("children"in e))throw new Error("Cannot set children on a text node");e.children=n;for(let t of n)t.parent=e},getHydrationContext(e){return},addEventListener(e,n,t){return new d},bindValue(e,n,t){return new d},setStyle(e,n,t){if(!("attributes"in e))throw new Error("Cannot set style on a text node");let i=e.attributes.style??"";i+=`${Qn(n)}: ${t};`,e.attributes.style=i}}}function nn(){return{tagName:"html",attributes:{},children:[],parent:void 0,fixedIdent:"document.documentElement"}}te();var at=JSON.parse('{"routes":[{"matcher":[],"frames":[{"index":0}],"is404":false},{"matcher":[{"type":"static","match":"docs"},{"type":"spread","name":"page"}],"frames":[{"index":1},{"index":2}],"is404":false},{"matcher":[{"type":"spread","name":"404"}],"frames":[{"index":1},{"index":3}],"is404":true}]}'),pt=[async()=>(await Promise.resolve().then(() => (an(),fn))).$d_109_720,async()=>(await Promise.resolve().then(() => (yn(),pn))).$d_732_888,async()=>(await Promise.resolve().then(() => (mn(),hn))).$d_1050_1265,async()=>(await Promise.resolve().then(() => (dn(),vn))).$d_902_1009],yt=[{matcher:[{type:"static",match:"api"},{type:"static",match:"add"}],impl:0,schema:1,method:"GET"}],ht=[async()=>(await Promise.resolve().then(() => (bn(),gn))).$d_1395_1435,async()=>(await Promise.resolve().then(() => (wn(),kn))).$d_1323_1385];async function mt(e){let t=new URL(e.url).pathname,i=await Qe(e,yt,ht);if(i)return i;let r=en(),u=nn(),s=new d;try{await He({props:at,loaders:pt,renderer:r,root:u,pathname:t,context:{},lifetime:s});let l=ge(u);return new Response(l,{status:200,headers:{"Content-Type":"text/html"}})}catch(l){return console.error("Rendering error:",l),new Response("Internal Server Error",{status:500})}finally{s.close()}}export{mt as default};
